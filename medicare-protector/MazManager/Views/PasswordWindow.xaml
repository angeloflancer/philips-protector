<Window x:Class="MazManager.Views.PasswordWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Authentication Required" 
        SizeToContent="Height"
        Width="380"
        MinHeight="300"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundBrush}"
        ResizeMode="NoResize"
        WindowStyle="SingleBorderWindow">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,15">
            <TextBlock Text="Authentication Required" 
                       FontSize="20" 
                       FontWeight="Bold" 
                       Foreground="{StaticResource TextPrimaryBrush}"
                       HorizontalAlignment="Center"/>
            <TextBlock Text="Please enter the password to continue" 
                       FontSize="12" 
                       Foreground="{StaticResource TextSecondaryBrush}"
                       HorizontalAlignment="Center"
                       Margin="0,6,0,0"/>
        </StackPanel>

        <!-- Password Input Card -->
        <Border Grid.Row="1" Style="{StaticResource CardBorder}" Margin="0,0,0,15">
            <StackPanel>
                <TextBlock Text="Password" 
                           FontSize="13" 
                           FontWeight="SemiBold"
                           Foreground="{StaticResource TextPrimaryBrush}"
                           Margin="0,0,0,6"/>

                <Grid Height="36">
                    <PasswordBox x:Name="PasswordInput" 
                                 FontSize="14"
                                 VerticalContentAlignment="Center"
                                 Padding="8,0"
                                 KeyDown="PasswordInput_KeyDown"/>
                    <TextBox x:Name="PasswordTextBox"
                             FontSize="14"
                             VerticalContentAlignment="Center"
                             Padding="8,0"
                             Visibility="Collapsed"
                             KeyDown="PasswordTextBox_KeyDown"/>
                </Grid>

                <CheckBox x:Name="ShowPasswordCheckBox" 
                          Content="Show password"
                          Foreground="{StaticResource TextSecondaryBrush}"
                          Margin="0,10,0,0"
                          Checked="ShowPasswordCheckBox_Changed"
                          Unchecked="ShowPasswordCheckBox_Changed"/>

                <CheckBox x:Name="RememberMeCheckBox" 
                          Content="Remember me"
                          Foreground="{StaticResource TextSecondaryBrush}"
                          Margin="0,6,0,0"/>

                <TextBlock x:Name="ErrorText" 
                           Text="" 
                           Foreground="{StaticResource ErrorBrush}"
                           FontSize="11"
                           Margin="0,12,0,0"
                           TextWrapping="Wrap"
                           Visibility="Collapsed"/>

                <TextBlock x:Name="AttemptsText" 
                           Text="" 
                           Foreground="{StaticResource TextSecondaryBrush}"
                           FontSize="11"
                           Margin="0,4,0,0"/>
            </StackPanel>
        </Border>

        <!-- Buttons -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="10"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Button x:Name="CancelButton" 
                    Grid.Column="0"
                    Content="Cancel"
                    Style="{StaticResource ModernButton}"
                    Background="{StaticResource TextSecondaryBrush}"
                    Padding="15,10"
                    Click="CancelButton_Click"/>

            <Button x:Name="OkButton" 
                    Grid.Column="2"
                    Content="Login"
                    Style="{StaticResource SuccessButton}"
                    Padding="15,10"
                    Click="OkButton_Click"/>
        </Grid>
    </Grid>
</Window>
