<Window x:Class="MazManager.Views.ExecutableListWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Manage Protected Executables" 
        Height="450" Width="560"
        WindowStartupLocation="CenterOwner"
        Background="Transparent"
        AllowsTransparency="True"
        WindowStyle="None"
        ResizeMode="NoResize">

    <!-- Custom Window Border with rounded corners -->
    <Border Background="{StaticResource BackgroundBrush}" 
            CornerRadius="8" 
            BorderBrush="#CCCCCC" 
            BorderThickness="1"
            Margin="5">
        <Border.Effect>
            <DropShadowEffect BlurRadius="8" ShadowDepth="0" Opacity="0.3"/>
        </Border.Effect>
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Custom Title Bar -->
            <Border Grid.Row="0" 
                    Background="{StaticResource PrimaryBrush}" 
                    CornerRadius="8,8,0,0"
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid>
                    <TextBlock Text="Manage Protected Executables" 
                               Foreground="White" 
                               FontSize="14" 
                               FontWeight="SemiBold"
                               VerticalAlignment="Center" 
                               Margin="15,0,0,0"/>
                    
                    <!-- Window Controls -->
                    <StackPanel Orientation="Horizontal" 
                                HorizontalAlignment="Right" 
                                VerticalAlignment="Center"
                                Margin="0,0,5,0">
                        <Button x:Name="CloseWindowButton" 
                                Content="âœ•" 
                                Width="30" Height="26"
                                Background="Transparent"
                                Foreground="White"
                                BorderThickness="0"
                                FontSize="12"
                                Click="CloseWindowButton_Click"
                                Cursor="Hand"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Main Content -->
            <Grid Grid.Row="1" Margin="15">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <Border Grid.Row="0" Style="{StaticResource CardBorder}" Margin="0,0,0,10">
                    <StackPanel>
                        <TextBlock Text="Protected Executables" 
                                   FontSize="16" 
                                   FontWeight="Bold" 
                                   Foreground="{StaticResource TextPrimaryBrush}"/>
                        <TextBlock Text="Add executables to monitor for license protection" 
                                   FontSize="11" 
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   Margin="0,3,0,0"/>
                    </StackPanel>
                </Border>

                <!-- List Card -->
                <Border Grid.Row="1" Style="{StaticResource CardBorder}" Margin="0,0,0,10">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <ListView x:Name="ExecutableList" 
                                  Grid.Row="0"
                                  BorderThickness="1"
                                  BorderBrush="#E0E0E0"
                                  Background="White">
                            <ListView.View>
                                <GridView>
                                    <GridViewColumn Header="Name" Width="120" DisplayMemberBinding="{Binding Name}"/>
                                    <GridViewColumn Header="Full Path" Width="360" DisplayMemberBinding="{Binding FullPath}"/>
                                </GridView>
                            </ListView.View>
                        </ListView>

                        <StackPanel Grid.Row="1" 
                                    Orientation="Horizontal" 
                                    HorizontalAlignment="Left"
                                    Margin="0,10,0,0">
                            <Button x:Name="AddButton" 
                                    Content="Add Executable"
                                    Style="{StaticResource SuccessButton}"
                                    Padding="10,6"
                                    FontSize="11"
                                    Click="AddButton_Click"/>

                            <Button x:Name="RemoveButton" 
                                    Content="Remove Selected"
                                    Style="{StaticResource DangerButton}"
                                    Padding="10,6"
                                    FontSize="11"
                                    Margin="8,0,0,0"
                                    Click="RemoveButton_Click"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Footer Buttons -->
                <Grid Grid.Row="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="8"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock x:Name="StatusText" 
                               Grid.Column="0"
                               Text="" 
                               FontSize="10"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               VerticalAlignment="Center"/>

                    <Button x:Name="SaveButton" 
                            Grid.Column="1"
                            Content="Save Changes"
                            Style="{StaticResource SuccessButton}"
                            Padding="10,6"
                            FontSize="11"
                            Click="SaveButton_Click"/>

                    <Button x:Name="CloseButton" 
                            Grid.Column="3"
                            Content="Close"
                            Style="{StaticResource ModernButton}"
                            Background="{StaticResource TextSecondaryBrush}"
                            Padding="10,6"
                            FontSize="11"
                            Click="CloseButton_Click"/>
                </Grid>
            </Grid>
        </Grid>
    </Border>
</Window>
